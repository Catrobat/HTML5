<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Canvas Test</title>

    <script src="../../Client/pocketCode/libs/fabric/fabric-1.6.0-rc.1.js"></script>
    <script type="text/javascript">

        var img;
        window.onload = function () {
            img = new Image();
            img.onload = imageOnLoad;
            img.src = '_resources/minion.jpg';
        };

        var imageOnLoad = function () {
            var cElement = document.createElement('canvas');
            alert(cElement.height + ', ' + cElement.width); //make sure this parameters are set
            cElement.height = 600;
            cElement.width = 600;
            document.body.appendChild(cElement);

            //test
            var cImg = document.createElement('canvas');
            cImg.height = 500;
            cImg.width = 500;
            var ctx = cImg.getContext('2d');
            ctx.save();
            ctx.drawImage(img, 0, 0);//, 500, 500);
            ctx.restore();


            //render
            var canvas = new fabric.Canvas(cElement);
            //var imgElement = img;//document.getElementById('my-image');
            var imgInstance = new fabric.Image(cImg, {  //apply a canvas element as an image
                left: 100,
                top: 100,
                angle: 30,
                opacity: 0.5,
            });
            canvas.add(imgInstance);
        }
    </script>
</head>
<body style="background-color: lightgray">
</body>
</html>
