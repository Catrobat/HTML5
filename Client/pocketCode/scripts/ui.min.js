'use strict';PocketCode.Ui={_svgs:{tagStart:'<svg preserveAspectRatio="xMidYMin meet" viewBox="0,0,64,64">',tagEnd:'</svg>',circle:'<path d="M32,1C14.88,1,1,14.88,1,31.999C1,49.12,14.88,63,32,63s31-13.88,31-31.001C63,14.88,49.12,1,32,1zM32,56.979c-13.796,0-24.98-11.184-24.98-24.98c0-13.795,11.185-24.98,24.98-24.98s24.979,11.186,24.979,24.98C56.979,45.796,45.796,56.979,32,56.979z"/>',},Direction:{LTR:'ltr',RTL:'rtl',},PageNavigation:{FORWARD:0,BACKWARD:1,},};PocketCode.Ui.merge({SvgImageString:{PLAY:function(){var a=PocketCode.Ui._svgs;var b='<polygon points="34.662,32 22.934,44.066 27.438,48.55 43.629,32 27.438,15.45 22.934,19.934"/>';return a.tagStart+a.circle+b+a.tagEnd}(),PAUSE:function(){var a=PocketCode.Ui._svgs;var b='<path id="pause-3-icon" d="M29.95,45.617h-7.932V18.384h7.932V45.617z M42.949,45.617h-7.934V18.384h7.934V45.617z" />';return a.tagStart+a.circle+b+a.tagEnd}(),RESTART:function(){var a=PocketCode.Ui._svgs;var b='<path d="M42.275,22.056l-3.266,3.267c-1.772-1.773-4.222-2.87-6.927-2.87c-5.41,0-9.796,4.389-9.796,9.8c0,0.001,0-0.002,0,0h3.806l-6.079,6.075l-6.072-6.075h3.726c0-0.001,0,0,0,0c0-7.961,6.454-14.417,14.415-14.417C36.063,17.835,39.666,19.448,42.275,22.056z"/>';var c='<path d="M50.059,31.747l-6.073-6.075l-6.079,6.075h3.808c0,0.002,0-0.001,0,0c0,5.411-4.387,9.799-9.797,9.799c-2.706,0-5.154-1.097-6.927-2.868l-3.267,3.266c2.608,2.608,6.213,4.221,10.193,4.221c7.961,0,14.414-6.455,14.414-14.417c0,0,0,0.001,0,0H50.059L50.059,31.747z"/>';return a.tagStart+a.circle+b+c+a.tagEnd}(),BACK:function(){var a=PocketCode.Ui._svgs;var b='<polygon points="27.583,32 39.629,44.395 35.001,49 18.371,32 35.001,15 39.629,19.605" class="pc-svgPlayerIcon"/>';return a.tagStart+a.circle+b+a.tagEnd}(),SCREENSHOT:function(){var a=PocketCode.Ui._svgs;var b='<path d="M35.486,32.488c0,1.867-1.519,3.385-3.385,3.385c-1.868,0-3.388-1.518-3.388-3.385c0-1.867,1.52-3.385,3.388-3.385C33.968,29.103,35.486,30.622,35.486,32.488z"/>';var c='<path d="M37.338,23.314v-2.832H26.662v2.832H17v18.204h30V23.314H37.338z M32.102,38.787c-3.475,0-6.299-2.825-6.299-6.298s2.824-6.153,6.299-6.153c3.472,0,6.298,2.68,6.298,6.153S35.573,38.787,32.102,38.787z"/>';return a.tagStart+a.circle+b+c+a.tagEnd}(),AXES:function(){var a=PocketCode.Ui._svgs;var b='<text font-size="15.6718" font-weight="bold" font-family="Arial, sans-serif" transform="matrix(1 0 0 1 19.2988 29.2036)">X</text>';var c='<text font-size="15.6718" font-weight="bold" font-family="Arial, sans-serif" transform="matrix(1 0 0 1 34.9707 46.7944)">Y</text>';var d='<polygon points="23.996,46.546 20.307,46.546 40.004,18.416 43.693,18.416"/>';return a.tagStart+a.circle+b+c+d+a.tagEnd}(),MENU:function(){var a=PocketCode.Ui._svgs;var b='<path d="M26 13 l0 -6 6 0 6 0 0 6 0 6 -6 0 -6 0 0 -60z"/><path d="M26 32 l0 -6 6 0 6 0 0 6 0 6 -6 0 -6 0 0 -60z"/><path d="M26 51 l0 -6 6 0 6 0 0 6 0 6 -6 0 -6 0 0 -60z"/>';return a.tagStart+b+a.tagEnd}(),},I18nTextNode:(function(){I18nTextNode.extends(SmartJs.Ui.TextNode,false);function I18nTextNode(a,b,c){SmartJs.Ui.TextNode.call(this);if(a&&typeof a!='string'&&!(a instanceof PocketCode.Core.I18nString))throw new Error('invalid argument: i18nKey or i18nString');this._i18n=a;this._insertBefore=b||'';this._insertAfter=c||'';if(PocketCode.I18nProvider)PocketCode.I18nProvider.onLanguageChange.addEventListener(new SmartJs.Event.EventListener(this._updateUiStrings,this));this._updateUiStrings()}Object.defineProperties(I18nTextNode.prototype,{i18n:{set:function(a){if(typeof a!='string'&&!(a instanceof PocketCode.Core.I18nString))throw new Error('invalid argument: i18nKey or i18nString');if(this._i18n instanceof PocketCode.Core.I18nString&&typeof a=='string')this._i18n.i18nKey=a;else this._i18n=a;this._updateUiStrings()},},});I18nTextNode.prototype.merge({_updateUiStrings:function(){var a='';if(this._i18n instanceof PocketCode.Core.I18nString)a=this._i18n.toString();else{if(!PocketCode.I18nProvider||!PocketCode.I18nProvider.getLocString)a='['+this._i18n+']';else a=PocketCode.I18nProvider.getLocString(this._i18n)}this.text=this._insertBefore.toString()+a+this._insertAfter.toString();this._text=a},show:function(){this._dom.textContent=this._insertBefore.toString()+this._text+this._insertAfter.toString();this._onResize.dispatchEvent()},});return I18nTextNode})(),I18nControl:(function(){I18nControl.extends(SmartJs.Ui.Control,false);function I18nControl(a,b){SmartJs.Ui.Control.call(this,a,b);var c=new SmartJs.Event.EventListener(this._updateUiStrings,this);PocketCode.I18nProvider.onLanguageChange.addEventListener(c)}I18nControl.prototype.merge({_updateUiStrings:function(){},});return I18nControl})(),Viewport:(function(){Viewport.extends(SmartJs.Ui.Viewport,false);function Viewport(){SmartJs.Ui.Viewport.call(this,{className:'pc-playerViewport'});this._dom.dir='ltr';this._disableBrowserGestures()}Object.defineProperties(Viewport.prototype,{uiDirection:{set:function(a){this._dom.dir=a},},});Viewport.prototype.merge({_disableBrowserGestures:function(){this._clickHandler=this._addDomListener(this._dom,'click',function(e){if(!(e.target instanceof HTMLInputElement)&&(!(e.target instanceof HTMLLabelElement)||typeof e.target.htmlFor!='string')&&e.cancelable)e.preventDefault()});this._dblClickHandler=this._addDomListener(this._dom,'dblclick',function(e){e.preventDefault()});this._touchStartHandler=this._addDomListener(this._dom,'touchstart',function(e){if(!e.systemAllowed&&(!(e.target instanceof HTMLInputElement)&&(!(e.target instanceof HTMLLabelElement)||typeof e.target.htmlFor!='string'))&&e.cancelable)e.preventDefault()});this._touchLeaveandler=this._addDomListener(this._dom,'touchleave',function(e){if(e.cancelable)e.preventDefault()});this._touchMoveHandler=this._addDomListener(this._dom,'touchmove',function(e){if(e.cancelable)e.preventDefault()})},_enableBrowserGestures:function(){this._removeDomListener(this._dom,'click',this._clickHandler);this._removeDomListener(this._dom,'dblclick',this._dblClickHandler);this._removeDomListener(this._dom,'touchstart',this._touchStartHandler);this._removeDomListener(this._dom,'touchleave',this._touchLeaveandler);this._removeDomListener(this._dom,'touchmove',this._touchMoveHandler)},addDialog:function(a){if(!(a instanceof PocketCode.Ui.Dialog))throw new Error('invalid parameter: dialog');this._appendChild(a)},loadPageView:function(a){if(!(a instanceof PocketCode.Ui.PageView))throw new Error('invalid parameter: page');this._appendChild(a)},dispose:function(){this._enableBrowserGestures();SmartJs.Ui.Viewport.prototype.dispose.call(this)},});return Viewport})(),});

PocketCode.Ui.Button=(function(){Button.extends(SmartJs.Ui.Control,false);function Button(a,b){SmartJs.Ui.Control.call(this,'button',b);this._textNode=new PocketCode.Ui.I18nTextNode(a);this._appendChild(this._textNode);this._onClick=new SmartJs.Event.Event(this);this._addDomListener(this._dom,'click',this._clickHandler);this._btnListener=this._addDomListener(this._dom,'touchstart',function(e){},{cancelBubble:true,stopPropagation:false,systemAllowed:true})}Object.defineProperties(Button.prototype,{text:{get:function(){return this._textNode.text},},i18nKey:{set:function(a){this._textNode.i18n=a},},disabled:{get:function(){return this._dom.disabled},set:function(a){this._dom.disabled=a},},});Object.defineProperties(Button.prototype,{onClick:{get:function(){return this._onClick},},});Button.prototype.merge({_clickHandler:function(e){this._dom.blur();this._onClick.dispatchEvent()},});return Button})();PocketCode.Ui.PlayerSvgButton=(function(){PlayerSvgButton.extends(PocketCode.Ui.Button,false);function PlayerSvgButton(a,b,c,d){PocketCode.Ui.Button.call(this,b,{className:'pc-playerButton'});if(!a)throw new Error('invalid argument: icon');if(c)this.addClassName('pc-menuBigButton');if(d){this.removeClassName('pc-playerButton');this.addClassName('pc-webButton')}var e=document.createElement('span');e.appendChild(this._textNode._dom);this._dom.innerHTML=a;this._dom.appendChild(e)}Object.defineProperties(PlayerSvgButton.prototype,{checked:{get:function(){var a=this._dom.className.split(/\s+/);var b='pc-playerButtonChecked';for(var i=0,l=a.length;i<l;i++)if(a[i]===b)return true;return false},set:function(a){if(a)this.addClassName('pc-playerButtonChecked');else this.removeClassName('pc-playerButtonChecked')},},});return PlayerSvgButton})();

PocketCode.Ui.Canvas=(function(){Canvas.extends(SmartJs.Ui.Control,false);function Canvas(a){a=a||{className:'pc-canvasContainer'};SmartJs.Ui.Control.call(this,'div',a);this._renderingSprites=[];this._renderingTexts=[];this._scalingX=1.0;this._scalingY=1.0;this._penStampCache={};this._currentSceneCache=undefined;this._cameraOn=false;this._cameraStream=null;this._activeTouchEvents=[];this._helperCanvasEl=document.createElement('canvas');this._helperCanvasCtx=this._helperCanvasEl.getContext('2d');this._cameraCanvasEl=document.createElement('canvas');this._cameraCanvasCtx=this._cameraCanvasEl.getContext('2d');this._backgroundCanvasEl=document.createElement('canvas');this._backgroundCanvasCtx=this._backgroundCanvasEl.getContext('2d');this._translation={x:Math.round(this._backgroundCanvasEl.width*0.5),y:Math.round(this._backgroundCanvasEl.height*0.5)};this._penStampCanvasEl=document.createElement('canvas');this._penStampCanvasCtx=this._penStampCanvasEl.getContext('2d');this._spritesCanvasEl=document.createElement('canvas');this._spritesCanvasCtx=this._spritesCanvasEl.getContext('2d');this._bubblesCanvasEl=document.createElement('canvas');this._bubblesCanvasCtx=this._bubblesCanvasEl.getContext('2d');this._upperCanvasEl=document.createElement('canvas');this._upperCanvasCtx=this._upperCanvasEl.getContext('2d');this._dom.appendChild(this._cameraCanvasEl);this._dom.appendChild(this._backgroundCanvasEl);this._dom.appendChild(this._penStampCanvasEl);this._dom.appendChild(this._spritesCanvasEl);this._dom.appendChild(this._bubblesCanvasEl);this._dom.appendChild(this._upperCanvasEl);this._onRenderingSpriteTouched=new SmartJs.Event.Event(this);this._onTouchStart=new SmartJs.Event.Event(this);this._addDomListener(this._upperCanvasEl,'mousedown',this._touchStartHandler);this._addDomListener(this._upperCanvasEl,'touchstart',this._touchStartHandler);this._onTouchMove=new SmartJs.Event.Event(this);this._addDomListener(this._upperCanvasEl,'mousemove',this._touchMoveHandler);this._addDomListener(this._upperCanvasEl,'touchmove',this._touchMoveHandler);this._onTouchEnd=new SmartJs.Event.Event(this);this._addDomListener(this._upperCanvasEl,'mouseup',this._touchEndHandler);this._addDomListener(this._upperCanvasEl,'mouseout',this._touchEndHandler);this._addDomListener(this._upperCanvasEl,'touchend',this._touchEndHandler)}Object.defineProperties(Canvas.prototype,{contextTop:{get:function(){return this._upperCanvasCtx},},cameraStream:{set:function(a){this._cameraStream=a},get:function(){return this._cameraStream}},cameraOn:{set:function(a){this._cameraOn=a;this.renderCamera()},get:function(){return this._cameraOn}},cameraContext:{get:function(){return this._cameraCanvasCtx}},renderingSprites:{set:function(a){if(!(a instanceof Array))throw new Error('invalid argument: expectes type: list');this._renderingSprites=a},},renderingTexts:{set:function(a){if(!(a instanceof Array))throw new Error('invalid argument: expected type: list');this._renderingTexts=a},},width:{get:function(){return this._backgroundCanvasEl.width},set:function(a){if(typeof a!=='number')throw new Error('invalid argument: expected "value" typeof "number" (px)');this._dom.style.width=(a+'px');this._backgroundCanvasEl.width=a;this._cameraCanvasEl.width=a;this._penStampCanvasEl.width=a;this._spritesCanvasEl.width=a;this._bubblesCanvasEl.width=a;this._translation={x:Math.round(a*0.5),y:Math.round(this.height*0.5)};this._upperCanvasEl.width=a;this._helperCanvasEl.width=a},},height:{get:function(){return this._backgroundCanvasEl.height},set:function(a){if(typeof a!=='number')throw new Error('invalid argument: expected "value" typeof "number" (px)');this._dom.style.height=(a+'px');this._backgroundCanvasEl.height=a;this._cameraCanvasEl.height=a;this._penStampCanvasEl.height=a;this._spritesCanvasEl.height=a;this._bubblesCanvasEl.height=a;this._translation={x:Math.round(this.width*0.5),y:Math.round(a*0.5)};this._upperCanvasEl.height=a;this._helperCanvasEl.height=a},},});Object.defineProperties(Canvas.prototype,{onRenderingSpriteTouched:{get:function(){return this._onRenderingSpriteTouched},},onTouchStart:{get:function(){return this._onTouchStart},},onTouchMove:{get:function(){return this._onTouchMove},},onTouchEnd:{get:function(){return this._onTouchEnd},},});Canvas.prototype.merge({setDimensions:function(a,b,c,d){a=Math.floor(a*0.5)*2.0;b=Math.floor(b*0.5)*2.0;this.height=b;this.width=a;this.scale(c,d)},scale:function(x,y){this._scalingX=x;this._scalingY=y;this.render()},_getTouchData:function(e){var a;if(!e.touches){a=this._getTouchEventPosition(e);return[{id:'m'+(e.which||e.button),x:a.x,y:a.y}]}var b,touches=e.changedTouches,touchData=[];for(var i=0,l=touches.length;i<l;i++){b=touches[i];a=this._getTouchEventPosition(e,b);touchData.push({id:'t'+b.identifier,x:a.x,y:a.y})}return touchData},_touchStartHandler:function(e){if(e.cancelable)e.preventDefault();e.stopPropagation();var a=this._getTouchData(e);for(var i=0,l=a.length;i<l;i++){this._activeTouchEvents.push(a[i].id);this._onTouchStart.dispatchEvent(a[i])}if(e.touches||e.which==1||e.button==0)for(var i=0,l=a.length;i<l;i++){var b=this._getTargetAt({x:a[i].x,y:a[i].y});if(b){this._onRenderingSpriteTouched.dispatchEvent(a[i].merge({targetId:b.id}))}}return false},_touchMoveHandler:function(e){if(e.cancelable)e.preventDefault();e.stopPropagation();if(!e.changedTouches&&!e.which&&isNaN(e.button))return;var a=this._getTouchData(e);if(!e.touches){var b=[];for(var i=0,l=this._activeTouchEvents.length;i<l;i++){var c=this._activeTouchEvents[i];if(c[0]=='m')b.push({id:c,x:a[0].x,y:a[0].y})}a=b}for(var i=0,l=a.length;i<l;i++){if(Math.abs(a[i].x)>this._backgroundCanvasEl.width*0.5/this._scalingX||Math.abs(a[i].y)>this._backgroundCanvasEl.height*0.5/this._scalingY){this._touchEndHandler(e);continue}if(this._activeTouchEvents.indexOf(a[i].id)>=0)this._onTouchMove.dispatchEvent(a[i])}return false},_touchEndHandler:function(e){if(e.cancelable)e.preventDefault();e.stopPropagation();var a=this._getTouchData(e);if(!e.touches){var b=[];for(var i=0,l=this._activeTouchEvents.length;i<l;i++){var c=this._activeTouchEvents[i];if(c[0]=='m')b.push({id:c,x:a[0].x,y:a[0].y})}a=b}for(var i=0,l=a.length;i<l;i++)if(this._activeTouchEvents.indexOf(a[i].id)>=0){this._activeTouchEvents.remove(a[i].id);this._onTouchEnd.dispatchEvent(a[i])}return false},_getTouchEventPosition:function(e,a){var b,pointerY;var c=this._backgroundCanvasEl.getBoundingClientRect();if(a!=undefined){b=a.clientX!=undefined?a.clientX-c.left-this._translation.x:e.clientX-this._translation.x;pointerY=-(a.clientY!=undefined?a.clientY-c.top-this._translation.y:e.clientY-this._translation.y)}else{b=e.clientX!=undefined?e.clientX-c.left-this._translation.x:-this._translation.x;pointerY=-(e.clientY!=undefined?e.clientY-c.top-this._translation.y:-this._translation.y)}var d={x:b/this._scalingX,y:pointerY/this._scalingY,};return d},_getTargetAt:function(a){var b=this._renderingSprites;var c,target;for(var i=b.length-1;i>=0;i--){c=b[i];if(c.visible&&c.containsPoint(a)&&!this._isTargetTransparent(c,a)){target=c;break}}return target},_isTargetTransparent:function(a,b){var c=this._helperCanvasCtx;c.clearRect(0,0,this._helperCanvasEl.width,this._helperCanvasEl.height);c.save();c.translate(this._translation.x,this._translation.y);c.scale(this._scalingX,this._scalingY);a.draw(c);c.restore();var d=c.getImageData(this._translation.x+Math.floor(b.x*this._scalingX),this._translation.y-Math.floor(b.y*this._scalingY),1,1);var e=!d.data||!d.data[3];d=undefined;return e},render:function(){var a=this._backgroundCanvasCtx;var b=this._spritesCanvasCtx;a.clearRect(0,0,this.width,this.height);a.save();a.translate(this._translation.x,this._translation.y);a.scale(this._scalingX,this._scalingY);b.clearRect(0,0,this.width,this.height);b.save();b.translate(this._translation.x,this._translation.y);b.scale(this._scalingX,this._scalingY);var c=this._renderingSprites;for(var i=0,l=c.length;i<l;i++){if(c[i].isBackground)c[i].draw(a);else c[i].draw(b)}c=this._renderingTexts;for(var i=0,l=c.length;i<l;i++){c[i].draw(b)}this._drawPenStampCacheCanvas();a.restore();b.restore()},renderCamera:function(){if(this._cameraOn&&this._cameraStream!=null&&this._cameraStream!=undefined){this._cameraCanvasCtx.drawImage(this._cameraStream,0,0,this._cameraCanvasEl.width,this._cameraCanvasEl.height);setTimeout(this.renderCamera.bind(this),10)}else{}},initScene:function(a,b){if(this._penStampCache[a]){this._currentSceneCache=this._penStampCache[a];return}var c=document.createElement('canvas');c.height=b.height;c.width=b.width;var d=c.getContext('2d');d.translate(b.width*0.5,b.height*0.5);this._penStampCache[a]={element:c,ctx:d};this._currentSceneCache=this._penStampCache[a]},clearCurrentPenStampCache:function(){var a=this._penStampCanvasCtx,el=this._penStampCanvasEl;a.clearRect(0,0,el.width,el.height);var c=this._currentSceneCache,e=c.element;if(!c)return;var a=c.ctx;a.clearRect(-e.width*0.5,-e.height*0.5,e.width,e.height)},clearPenStampCache:function(){var a=this._penStampCanvasCtx,el=this._penStampCanvasEl;a.clearRect(0,0,el.width,el.height);this._currentSceneCache=undefined;for(var b in this._penStampCache){delete this._penStampCache[b]}},movePen:function(a,b,c){var d=this._renderingSprites,ri;for(var i=0,l=d.length;i<l;i++){ri=d[i];if(ri.id===a){if(!ri.penDown)return;var e=this._currentSceneCache.ctx;e.beginPath();e.moveTo(ri.penX,-ri.penY);e.lineTo(b,-c);e.strokeStyle="rgb( "+ri.penColor.r+", "+ri.penColor.g+", "+ri.penColor.b+" )";e.lineWidth=ri._penSize;e.stroke();e.closePath();this._drawPenStampCacheCanvas();break}}},drawStamp:function(a){var b=this._renderingSprites;for(var i=0,l=b.length;i<l;i++){if(b[i].id===a){b[i].draw(this._currentSceneCache.ctx);this._drawPenStampCacheCanvas();break}}},_drawPenStampCacheCanvas:function(){if(!this._currentSceneCache)return;var a=this._penStampCanvasCtx,el=this._penStampCanvasEl,cache_element=this._currentSceneCache.element,destWidth=el.width/this._scalingX,destHeight=el.height/this._scalingY,sourceWidth=cache_element.width,sourceHeight=cache_element.height;a.clearRect(0,0,el.width,el.height);a.save();a.translate((destWidth-sourceWidth)*0.5,(destHeight-sourceHeight)*0.5);a.scale(this._scalingX,this._scalingY);a.drawImage(cache_element,0,0,sourceWidth,sourceHeight);a.restore()},toDataURL:function(a,b){var c=this.width,currentHeight=this.height;this._helperCanvasEl.width=a;this._helperCanvasEl.height=b;var d=this._helperCanvasCtx;d.save();d.fillStyle="#ffffff";d.fillRect(0,0,a,b);d.translate(a*0.5,b*0.5);d.scale(a*this._scalingX/c,b*this._scalingY/currentHeight);var e=this._renderingSprites;for(var i=0,l=e.length;i<l;i++){if(e[i].isBackground){e[i].draw(d);break}}d.drawImage(this._currentSceneCache.element,-a*0.5,-b*0.5);for(var i=0,l=e.length;i<l;i++)if(!e[i].isBackground)e[i].draw(d);e=this._renderingTexts;for(var i=0,l=e.length;i<l;i++)e[i].draw(d);d.restore();var f=this._helperCanvasEl.toDataURL('image/png');this._helperCanvasEl.width=c;this._helperCanvasEl.height=currentHeight;return f},dispose:function(){this._removeDomListener(this._upperCanvasEl,'mousedown',this._touchStartHandler);this._removeDomListener(this._upperCanvasEl,'touchstart',this._touchStartHandler);this._removeDomListener(this._upperCanvasEl,'mousemove',this._touchMoveHandler);this._removeDomListener(this._upperCanvasEl,'touchmove',this._touchMoveHandler);this._removeDomListener(this._upperCanvasEl,'mouseup',this._touchEndHandler);this._removeDomListener(this._upperCanvasEl,'mouseout',this._touchEndHandler);this._removeDomListener(this._upperCanvasEl,'touchend',this._touchEndHandler);SmartJs.Ui.Control.prototype.dispose.call(this)}});return Canvas})();

PocketCode.Ui.DialogType={DEFAULT:0,WARNING:1,ERROR:2,};PocketCode.Ui.Dialog=(function(){Dialog.extends(SmartJs.Ui.ContainerControl,false);function Dialog(a,b,c){SmartJs.Ui.ContainerControl.call(this,{className:'pc-webOverlay',style:{position:'absolute'}});this._minHeight=200;this._marginTopBottom=15;this._header=new SmartJs.Ui.ContainerControl({className:'pc-dialogHeader'});this._captionTextNode=new PocketCode.Ui.I18nTextNode(b);this._messageTextNode=new PocketCode.Ui.I18nTextNode(c);this._header.appendChild(this._captionTextNode);this._dialog=new SmartJs.Ui.ContainerControl({className:'pc-dialog'});this._container=new PocketCode.Ui.ScrollContainer({className:'pc-dialogBody'},{className:'pc-dialogContent'});this._footer=new SmartJs.Ui.ContainerControl({className:'pc-dialogFooter'});this._createLayout();this._type=a||PocketCode.Ui.DialogType.DEFAULT;this.type=this._type;this._onResize.addEventListener(new SmartJs.Event.EventListener(this._resizeHandler,this));this._languageChangeListener=new SmartJs.Event.EventListener(this._updateUiStrings,this);PocketCode.I18nProvider.onLanguageChange.addEventListener(this._languageChangeListener)}Object.defineProperties(Dialog.prototype,{type:{get:function(){return this._type},set:function(a){switch(a){case PocketCode.Ui.DialogType.DEFAULT:this._header.className='pc-dialogHeader';break;case PocketCode.Ui.DialogType.WARNING:this._header.className='pc-dialogHeader pc-dialogWarning';break;case PocketCode.Ui.DialogType.ERROR:this._header.className='pc-dialogHeader pc-dialogError';break;default:throw new Error('invalid argument: dialog type');}this._type=a},},i18nCaptionKey:{get:function(){return this._captionTextNode.text},set:function(a){if(typeof a!=='string')throw new error('invalid argument: caption: expected type = string');this._captionTextNode.i18n=a},},});Dialog.prototype.merge({_updateUiStrings:function(){setTimeout(this._container.onResize.dispatchEvent.bind(this._container.onResize),0)},_createLayout:function(){var a=document.createElement('div');a.className='pc-dialogOverlay';this._dom.appendChild(a);var b=document.createElement('div');b.className='pc-webLayout';this._dom.appendChild(b);var c=document.createElement('div');c.className='pc-webLayoutRow';b.appendChild(c);var d=document.createElement('div');d.className='pc-dialogCol';c.appendChild(d);var e=document.createElement('div');e.className='pc-centerCol';c.appendChild(e);d=document.createElement('div');d.className='pc-dialogCol';c.appendChild(d);var f=this._dialog;e.appendChild(f._dom);this.appendChild(this._messageTextNode);f.appendChild(this._header);f.appendChild(this._container);f.appendChild(this._footer)},_resizeHandler:function(e){var a=this.height-(this._header.height+this._footer.height+2*this._marginTopBottom);var b=this._minHeight-(this._header.height+this._footer.height);if(a>b)this._container.style.maxHeight=a+'px';else this._container.style.maxHeight=b+'px';this._dialog.style.width=(this.width-30)+'px';var c=this._footer._dom.children;for(var i=0,l=c.length;i<l;i++){if(l==1)c[i].style.width='100%';else c[i].style.width=((this._dialog.width-2*(l-1))/l)+'px'}this._container.onResize.dispatchEvent()},addButton:function(a){if(!(a instanceof PocketCode.Ui.Button))throw new Error('invalid argument: button: expected type PocketCode.Ui.Button');var b=this._footer._dom.children.length;if(b>1)throw new Error('add button: there are currently 2 buttons supported at max');this._footer.appendChild(a)},execDefaultBtnAction:function(){if(this.onCancel)this.onCancel.dispatchEvent();else if(this.onOK)this.onOK.dispatchEvent()},});return Dialog})();PocketCode.Ui.merge({AskDialog:(function(){AskDialog.extends(PocketCode.Ui.Dialog,false);function AskDialog(a){PocketCode.Ui.Dialog.call(this);this._minHeight=250;if(SmartJs.Device.isMobile){this.style.position='';this.style.minHeight=(this._minHeight+2*this._marginTopBottom)+'px'}this._captionTextNode.dispose();this._captionTextNode=new SmartJs.Ui.TextNode(a);this._scrollContainer=new PocketCode.Ui.ScrollContainer();this._header.className='pc-askDialogHeader';this._header.appendChild(this._scrollContainer);this._scrollContainer.appendChild(this._captionTextNode);var b=PocketCode.I18nProvider.getTextDirection(a);this._header._dom.dir=b;this._container.dispose();this._container=new SmartJs.Ui.ContainerControl({className:'pc-askDialogBody'});this._messageTextNode=new PocketCode.Ui.I18nTextNode('lblEnterAnswer','',':');var c=new SmartJs.Ui.ContainerControl();c.appendChild(this._messageTextNode);this._container.appendChild(c);this._answerInput=new SmartJs.Ui.HtmlTag('input');this._answerInput.setDomAttribute('dir','auto');this._answerInput.setDomAttribute('type','text');this._addDomListener(this._answerInput.dom,'keypress',function(e){if(e.keyCode==13){e.preventDefault();this._onSubmit.dispatchEvent({answer:this.answer})}});this._container.appendChild(this._answerInput);this._dialog.insertAt(1,this._container);this._btnSubmit=new PocketCode.Ui.Button('lblSubmitAnswer');this._btnSubmit.onClick.addEventListener(new SmartJs.Event.EventListener(function(){this._onSubmit.dispatchEvent({answer:this.answer})},this));this.addButton(this._btnSubmit);this._onSubmit=new SmartJs.Event.Event(this)}Object.defineProperties(AskDialog.prototype,{onSubmit:{get:function(){return this._onSubmit},},});Object.defineProperties(AskDialog.prototype,{answer:{get:function(){return this._answerInput.dom.value},},});AskDialog.prototype.merge({focusInputField:function(){this._answerInput.dom.focus()},_resizeHandler:function(e){var a=this.height-(this._container.height+this._footer.height+2*this._marginTopBottom+34);var b=this._minHeight-(this._container.height+this._footer.height);if(a>b)this._scrollContainer.style.maxHeight=a+'px';else this._scrollContainer.style.maxHeight=b+'px';this._dialog.style.width=(this.width-30)+'px';var c=this._footer._dom.children;for(var i=0,l=c.length;i<l;i++){if(l==1)c[i].style.width='100%';else c[i].style.width=((this._dialog.width-2*(l-1))/l)+'px'}this._scrollContainer.onResize.dispatchEvent()},});return AskDialog})(),ErrorDialog:(function(){ErrorDialog.extends(PocketCode.Ui.Dialog,false);function ErrorDialog(a,b){PocketCode.Ui.Dialog.call(this,PocketCode.Ui.DialogType.ERROR,a,b);this._btnOK=new PocketCode.Ui.Button('lblOk');this.addButton(this._btnOK);this._sorryMessageTextNode=new PocketCode.Ui.I18nTextNode('msgErrorSorry','',' ');this.insertAt(0,this._sorryMessageTextNode);this._br1=new SmartJs.Ui.HtmlTag('br');this.appendChild(this._br1);this._logMessageTextNode=new PocketCode.Ui.I18nTextNode('msgErrorReportGenerated');this.appendChild(this._logMessageTextNode);this._br1.hide();this._logMessageTextNode.hide();this._br2=new SmartJs.Ui.HtmlTag('br');this._br3=new SmartJs.Ui.HtmlTag('br');this.appendChild(this._br2);this.appendChild(this._br3);this._closeMessageTextNode=new PocketCode.Ui.I18nTextNode('msgErrorExit');this.appendChild(this._closeMessageTextNode)}Object.defineProperties(ErrorDialog.prototype,{onOK:{get:function(){return this._btnOK.onClick},},});Object.defineProperties(ErrorDialog.prototype,{logMsgVisible:{set:function(a){if(a){this._br1.show();this._logMessageTextNode.show()}else{this._br1.hide();this._logMessageTextNode.hide()}},},closeMsgVisible:{set:function(a){if(a){this._br2.show();this._br3.show();this._closeMessageTextNode.show()}else{this._br2.hide();this._br3.hide();this._closeMessageTextNode.hide()}},},});return ErrorDialog})(),});PocketCode.Ui.merge({GlobalErrorDialog:(function(){GlobalErrorDialog.extends(PocketCode.Ui.ErrorDialog,false);function GlobalErrorDialog(){PocketCode.Ui.ErrorDialog.call(this,'lblGlobalErrorCaption','msgGlobalError');this.logMsgVisible=true}return GlobalErrorDialog})(),BrowserNotSupportedDialog:(function(){BrowserNotSupportedDialog.extends(PocketCode.Ui.ErrorDialog,false);function BrowserNotSupportedDialog(){PocketCode.Ui.ErrorDialog.call(this,'lblBrowserNotSupportedErrorCaption','msgBrowserNotSupportedError');this.appendChild(new SmartJs.Ui.HtmlTag('br'));this.appendChild(new SmartJs.Ui.HtmlTag('br'));this.appendChild(new PocketCode.Ui.I18nTextNode('msgBrowserNotSupportedErrorOther'))}return BrowserNotSupportedDialog})(),MobileRestrictionDialog:(function(){MobileRestrictionDialog.extends(PocketCode.Ui.Dialog,false);function MobileRestrictionDialog(){PocketCode.Ui.Dialog.call(this,PocketCode.Ui.DialogType.WARNING,'lblMobileRestrictionsWarningCaption','msgMobileRestrictionsWarning');this._debugMessage=new PocketCode.Ui.I18nTextNode('msgMobileRestrictionsDebug');this.appendChild(new SmartJs.Ui.HtmlTag('br'));this.appendChild(new SmartJs.Ui.HtmlTag('br'));this.appendChild(this._debugMessage);this._btnCancel=new PocketCode.Ui.Button('lblCancel');this.addButton(this._btnCancel);this._btnConfirm=new PocketCode.Ui.Button('lblConfirm');this.addButton(this._btnConfirm)}Object.defineProperties(MobileRestrictionDialog.prototype,{onCancel:{get:function(){return this._btnCancel.onClick},},onConfirm:{get:function(){return this._btnConfirm.onClick},},});return MobileRestrictionDialog})(),ExitWarningDialog:(function(){ExitWarningDialog.extends(PocketCode.Ui.Dialog,false);function ExitWarningDialog(){PocketCode.Ui.Dialog.call(this,PocketCode.Ui.DialogType.DEFAULT,'lblExitDialogCaption','msgExitDialog');this._btnExit=new PocketCode.Ui.Button('lblExit');this.addButton(this._btnExit);this._btnCancel=new PocketCode.Ui.Button('lblCancel');this._btnCancel.onClick.addEventListener(new SmartJs.Event.EventListener(function(e){this._onCancel.dispatchEvent()},this));this.addButton(this._btnCancel);this._onCancel=new SmartJs.Event.Event(this)}Object.defineProperties(ExitWarningDialog.prototype,{onCancel:{get:function(){return this._onCancel},},onExit:{get:function(){return this._btnExit.onClick},},});return ExitWarningDialog})(),ProjectNotFoundDialog:(function(){ProjectNotFoundDialog.extends(PocketCode.Ui.ErrorDialog,false);function ProjectNotFoundDialog(){PocketCode.Ui.ErrorDialog.call(this,'lblProjectNotFoundErrorCaption','msgProjectNotFoundError')}return ProjectNotFoundDialog})(),ProjectNotValidDialog:(function(){ProjectNotValidDialog.extends(PocketCode.Ui.ErrorDialog,false);function ProjectNotValidDialog(){PocketCode.Ui.ErrorDialog.call(this,'lblProjectNotValidErrorCaption','msgProjectNotValidError')}return ProjectNotValidDialog})(),ParserErrorDialog:(function(){ParserErrorDialog.extends(PocketCode.Ui.ErrorDialog,false);function ParserErrorDialog(){PocketCode.Ui.ErrorDialog.call(this,'lblParserErrorCaption','msgParserError');this.logMsgVisible=true}return ParserErrorDialog})(),InternalServerErrorDialog:(function(){InternalServerErrorDialog.extends(PocketCode.Ui.ErrorDialog,false);function InternalServerErrorDialog(){PocketCode.Ui.ErrorDialog.call(this,'lblInternalServerErrorCaption','msgInternalServerError');this.logMsgVisible=true}return InternalServerErrorDialog})(),ServerConnectionErrorDialog:(function(){ServerConnectionErrorDialog.extends(PocketCode.Ui.Dialog,false);function ServerConnectionErrorDialog(){PocketCode.Ui.Dialog.call(this,PocketCode.Ui.DialogType.ERROR,'lblServerConnectionErrorCaption','msgServerConnectionError');this.appendChild(new SmartJs.Ui.HtmlTag('br'));this.appendChild(new PocketCode.Ui.I18nTextNode('msgInternetConnectionAvailable'));this._btnCancel=new PocketCode.Ui.Button('lblCancel');this.addButton(this._btnCancel);this._btnRetry=new PocketCode.Ui.Button('lblRetry');this.addButton(this._btnRetry);this._onRetry=new SmartJs.Event.Event(this);this._btnRetry.onClick.addEventListener(new SmartJs.Event.EventListener(this._onRetry.dispatchEvent,this._onRetry))}Object.defineProperties(ServerConnectionErrorDialog.prototype,{onCancel:{get:function(){return this._btnCancel.onClick},},onRetry:{get:function(){return this._onRetry},},});return ServerConnectionErrorDialog})(),ProjectLoadingErrorDialog:(function(){ProjectLoadingErrorDialog.extends(PocketCode.Ui.Dialog,false);function ProjectLoadingErrorDialog(){PocketCode.Ui.Dialog.call(this,PocketCode.Ui.DialogType.ERROR,'lblProjectLoadingErrorCaption','msgProjectLoadingError');this.appendChild(new SmartJs.Ui.HtmlTag('br'));this.appendChild(new PocketCode.Ui.I18nTextNode('msgInternetConnectionAvailable'));this._btnCancel=new PocketCode.Ui.Button('lblCancel');this.addButton(this._btnCancel);this._btnRetry=new PocketCode.Ui.Button('lblRetry');this.addButton(this._btnRetry);this._onRetry=new SmartJs.Event.Event(this);this._btnRetry.onClick.addEventListener(new SmartJs.Event.EventListener(this._onRetry.dispatchEvent,this._onRetry))}Object.defineProperties(ProjectLoadingErrorDialog.prototype,{onCancel:{get:function(){return this._btnCancel.onClick},},onRetry:{get:function(){return this._onRetry},},});return ProjectLoadingErrorDialog})(),ProjectLoadingAlertDialog:(function(){ProjectLoadingAlertDialog.extends(PocketCode.Ui.Dialog,false);function ProjectLoadingAlertDialog(a,b){if(!(a instanceof Array))throw new Error('invalid parameter: i18nAlerts');if(b&&!(b instanceof Array))throw new Error('invalid parameter: i18nWarnings');if(b&&b.length>0)PocketCode.Ui.Dialog.call(this,PocketCode.Ui.DialogType.WARNING,'msgUnsupportedWarningCaption','msgUnsupportedDefault');else PocketCode.Ui.Dialog.call(this,PocketCode.Ui.DialogType.DEFAULT,'msgUnsupportedDefaultCaption','msgUnsupportedDefault');this._container.style.textAlign='inherit';this._btnCancel=new PocketCode.Ui.Button('lblCancel');this.addButton(this._btnCancel);this._btnContinue=new PocketCode.Ui.Button('lblContinue');this._btnContinue.onClick.addEventListener(new SmartJs.Event.EventListener(function(e){this._onContinue.dispatchEvent()},this));this.addButton(this._btnContinue);if(a.length>0){this._msgUl=new SmartJs.Ui.HtmlTag('ul',{style:{color:'#33B5E5'}});this._container.appendChild(this._msgUl);for(var i=0,l=a.length;i<l;i++){this._addLiItem(a[i],this._msgUl)}}else this._messageTextNode.i18n='msgUnsupportedWarning';if(b&&b.length>0){if(a.length>0)this._container.appendChild(new PocketCode.Ui.I18nTextNode('msgUnsupportedWarning'));this._warningUl=new SmartJs.Ui.HtmlTag('ul',{style:{color:'#EF7716'}});for(var i=0,l=b.length;i<l;i++){this._addLiItem(b[i],this._warningUl)}this._container.appendChild(this._warningUl);this._container.appendChild(new PocketCode.Ui.I18nTextNode('msgUnsupportedWarningContinue'))}this._onContinue=new SmartJs.Event.Event(this)}Object.defineProperties(ProjectLoadingAlertDialog.prototype,{onCancel:{get:function(){return this._btnCancel.onClick},},onContinue:{get:function(){return this._onContinue},},});ProjectLoadingAlertDialog.prototype.merge({_addLiItem:function(a,b){var c=new SmartJs.Ui.HtmlTag('li');c.appendChild(new PocketCode.Ui.I18nTextNode(a));b.appendChild(c)},});return ProjectLoadingAlertDialog})(),ScreenshotDialog:(function(){ScreenshotDialog.extends(PocketCode.Ui.Dialog,false);function ScreenshotDialog(){PocketCode.Ui.Dialog.call(this,PocketCode.Ui.DialogType.DEFAULT,'lblScreenshotCaption');this._btnCancel=new PocketCode.Ui.Button('lblClose');this._btnCancel.onClick.addEventListener(new SmartJs.Event.EventListener(function(e){this._onCancel.dispatchEvent()},this));this.addButton(this._btnCancel);this._screenshotImage=new SmartJs.Ui.Image({style:{width:'100%'}});this._screenshotImage.onLoad.addEventListener(new SmartJs.Event.EventListener(this._imageOnLoadHandler,this));if(SmartJs.Device.isMobile){this._addDomListener(this._screenshotImage._dom,'touchstart',function(e){},{stopPropagation:false,systemAllowed:true});this._screenshotImage.style.paddingTop='10px';this._messageTextNode.i18n='msgScreenshotMobile'}else{this._messageTextNode.dispose();this._downloadForm=document.createElement('form');this._downloadForm.style.margin=0;this._downloadForm.style.padding=0;this._downloadForm.method='POST';this._downloadForm.action=PocketCode._serviceEndpoint+'file/screenshot/';this._downloadInput=document.createElement('input');this._downloadInput.type='hidden';this._downloadInput.name='base64string';this._downloadForm.appendChild(this._downloadInput);this._dom.appendChild(this._downloadForm);this._btnDownload=new PocketCode.Ui.Button('lblDownload');this._btnDownload.disabled=true;this._btnDownload.onClick.addEventListener(new SmartJs.Event.EventListener(function(e){this._onDownload.dispatchEvent()},this));this.addButton(this._btnDownload)}this._onCancel=new SmartJs.Event.Event(this);this._onDownload=new SmartJs.Event.Event(this)}Object.defineProperties(ScreenshotDialog.prototype,{onCancel:{get:function(){return this._onCancel},},onDownload:{get:function(){return this._onDownload},},});Object.defineProperties(ScreenshotDialog.prototype,{imageSrc:{set:function(a){if(this._downloadInput)this._downloadInput.value=a;this._screenshotImage.src=a;this.appendChild(this._screenshotImage)},},});ScreenshotDialog.prototype.merge({_imageOnLoadHandler:function(){if(this._btnDownload)this._btnDownload.disabled=false;window.setTimeout(this._container.onResize.dispatchEvent.bind(this._container.onResize),10)},download:function(){if(this._downloadForm)this._downloadForm.submit()}});return ScreenshotDialog})(),});

PocketCode.Ui.I18nCheckbox=(function(){I18nCheckbox.extends(SmartJs.Ui.Control,false);function I18nCheckbox(a,b,c){SmartJs.Ui.Control.call(this,'div',c||{className:'pc-checkbox'});this._input=new SmartJs.Ui.HtmlTag('input');this._input.setDomAttribute('type','checkbox');this._onCheckedChangeListener=this._input.addDomListener('change',function(e){this._onCheckedChange.dispatchEvent({value:this._value,checked:this.checked})}.bind(this));this._appendChild(this._input);this._label=new SmartJs.Ui.HtmlTag('label');this._label.setDomAttribute('for',this._input.id);this._label.setDomAttribute('onclick','');this._textNode=new PocketCode.Ui.I18nTextNode(a);this._label.appendChild(this._textNode);this._appendChild(this._label);this._value=b;this._onCheckedChange=new SmartJs.Event.Event(this)}Object.defineProperties(I18nCheckbox.prototype,{value:{get:function(){return this._value},set:function(a){this._value=a},},checked:{get:function(){return this._input.dom.checked},set:function(a){if(typeof a!='boolean')throw new Error('invalid argument: expected type: boolean');if(this._input.dom.checked==a)return;this._input.dom.checked=a;this._onCheckedChange.dispatchEvent({value:this._value,checked:this.checked})},},});Object.defineProperties(I18nCheckbox.prototype,{onCheckedChange:{get:function(){return this._onCheckedChange},},});I18nCheckbox.prototype.merge({dispose:function(){this._input.removeDomListener('change',this._onCheckedChangeListener);SmartJs.Ui.Control.prototype.dispose.call(this)},});return I18nCheckbox})();PocketCode.Ui.merge({RadioGroup:(function(){function RadioGroup(a){this._id=a||SmartJs.getNewId();this._radios=[];this._checked=undefined;this._onCheckedChange=new SmartJs.Event.Event(this)}Object.defineProperties(RadioGroup.prototype,{id:{get:function(){return this._id},},radios:{get:function(){return this._radios},},checked:{get:function(){return this._checked},set:function(a){if(!(a instanceof PocketCode.Ui.Radio))throw new Error('invalid argument: expected type: Radio');if(this._checked===a)return;var b=this._radios.indexOf(a);if(b!=-1){var r=this._radios[b];r.checked=true}},},});Object.defineProperties(RadioGroup.prototype,{onCheckedChange:{get:function(){return this._onCheckedChange}}});RadioGroup.prototype.merge({add:function(a){if(!(a instanceof PocketCode.Ui.Radio)&&!(a instanceof Array))throw new Error('invalid argument: expected Radio or Radio[]');if(a instanceof Array){for(var i=0,l=a.length;i<l;i++)this.add(a[i])}else{var b=this._radios.indexOf(a);if(b==-1){a.onCheckedChange.addEventListener(new SmartJs.Event.EventListener(this._radioCheckHandler,this));this._radios.push(a);a.group=this;this._radioCheckHandler({checked:a.checked,target:a})}}},remove:function(a){if(!(a instanceof PocketCode.Ui.Radio)&&!(a instanceof Array))throw new Error('invalid argument: expected Radio or Radio[]');if(a instanceof Array){for(var i=0,l=a.length;i<l;i++)this.remove(a[i])}else{var b=this._radios.indexOf(a);if(b!=-1){this._radios.remove(a);a.onCheckedChange.removeEventListener(new SmartJs.Event.EventListener(this._radioCheckHandler,this));a.group=undefined;if(a.checked){this._checked=undefined;this._onCheckedChange.dispatchEvent({groupId:this._id,value:undefined,radio:this._checked})}}}},_radioCheckHandler:function(e){if(e.checked&&this._checked!==e.target){this._checked=e.target;var a=this._radios,r;for(var i=0,l=a.length;i<l;i++){r=a[i];if(r!==e.target)r.checked=false}this._onCheckedChange.dispatchEvent({groupId:this._id,value:this._checked.value,radio:this._checked})}},dispose:function(){this._checked=undefined;this._radios.length=0;this._disposed=true},});return RadioGroup})(),Radio:(function(){Radio.extends(PocketCode.Ui.I18nCheckbox,false);function Radio(a,b,c){PocketCode.Ui.I18nCheckbox.call(this,'',b,c||{className:'pc-radio'});this._input.setDomAttribute('type','radio');this._textNode.dispose();this._textNode=new SmartJs.Ui.TextNode(a);this._label.appendChild(this._textNode);this._label.setDomAttribute('dir',PocketCode.I18nProvider.getTextDirection(a));this._group=undefined;this._value=b}Object.defineProperties(Radio.prototype,{group:{set:function(a){if(a&&!(a instanceof PocketCode.Ui.RadioGroup))throw new Error('invalid argument: expected type: RadioGroup');if(a===this._group)return;if(this._group)this._group.remove(this);if(a){this._group=a;this._input.name=a.id;a.add(this)}else{this._group=undefined;this._input.name=SmartJs.getNewId()}},},});Radio.prototype.merge({dispose:function(){this._group=undefined;PocketCode.Ui.I18nCheckbox.prototype.dispose.call(this)},});return Radio})(),});PocketCode.Ui.merge({I18nRadio:(function(){I18nRadio.extends(PocketCode.Ui.Radio,false);function I18nRadio(a,b,c){PocketCode.Ui.Radio.call(this,'',b,c);this._textNode.dispose();this._textNode=new PocketCode.Ui.I18nTextNode(a);this._label.appendChild(this._textNode);this._group=undefined;this._value=b}return I18nRadio})(),});

PocketCode.Ui.Menu=(function(){Menu.extends(SmartJs.Ui.ContainerControl,false);function Menu(a){SmartJs.Ui.ContainerControl.call(this,{className:'pc-menu'});if(SmartJs.Device.isMobile)this.addClassName('pc-menuMobile');this._menuButton=new SmartJs.Ui.ContainerControl({className:'pc-menuButton'});this.appendChild(this._menuButton);var b=new PocketCode.Ui.PlayerSvgButton(PocketCode.Ui.SvgImageString.MENU,undefined,false,true);b.style.margin='2px';b.onClick.addEventListener(new SmartJs.Event.EventListener(this._openCloseHandler,this));this._menuButton.appendChild(b);this._subMenu=new SmartJs.Ui.ContainerControl({className:'pc-subMenu'});this._subMenu.hide();this._appendChild(this._subMenu);this._container=new PocketCode.Ui.ScrollContainer();this._subMenu.appendChild(this._container);this._onMenuAction=new SmartJs.Event.Event(this);this._onOpen=new SmartJs.Event.Event(this);PocketCode.I18nProvider.onDirectionChange.addEventListener(new SmartJs.Event.EventListener(function(e){this._dom.dir=e.direction},this))}Object.defineProperties(Menu.prototype,{onMenuAction:{get:function(){return this._onMenuAction}},onOpen:{get:function(){return this._onOpen}},});Menu.prototype.merge({_openCloseHandler:function(e){if(this._subMenu.hidden){this._subMenu.show();this.verifyResize();this._menuButton.addClassName('pc-menuButtonOpened');this._onOpen.dispatchEvent()}else{this.close()}},close:function(e){this._subMenu.hide();this._menuButton.removeClassName('pc-menuButtonOpened')},verifyResize:function(){if(!this._subMenu)return;var a=this._subMenu.clientRect,parentHeight=this._parent?this._parent.height:document.body.clientHeight;this._container.style.maxHeight=(parentHeight-a.top-10)+'px';SmartJs.Ui.ContainerControl.prototype.verifyResize.call(this);this._container.verifyResize()},});return Menu})();PocketCode.Ui.MenuSeparator=(function(){MenuSeparator.extends(SmartJs.Ui.Control,false);function MenuSeparator(a){SmartJs.Ui.Control.call(this,'div',{className:'pc-menuSeparator'});this._dom.appendChild(document.createElement('hr'))}return MenuSeparator})();PocketCode.Ui.MenuItem=(function(){MenuItem.extends(PocketCode.Ui.Button,false);function MenuItem(a){PocketCode.Ui.Button.call(this,a,{className:'pc-menuItem'});this._removeDomListener(this._dom,'touchstart',this._btnListener);this._addDomListener(this._dom,'touchstart',function(e){},{stopPropagation:false,systemAllowed:true})}return MenuItem})();

PocketCode.Ui.merge({PlayerStartScreen:(function(){PlayerStartScreen.extends(PocketCode.Ui.I18nControl,false);function PlayerStartScreen(a,b){PocketCode.Ui.I18nControl.call(this,'div');this._dom.className='pc-playerStartScreen';this._titleTextNode=new SmartJs.Ui.TextNode('');this._domHeader=document.createElement('div');this._domHeader.className='pc-title';if(a)this.title=a;this._previewImage=new Image();if(b)this.previewImage=b;else this.previewImage=PocketCode.domain+'/images/default/screenshot.png';this._progressLayout=new SmartJs.Ui.Control('div');this._progressTextNode=new PocketCode.Ui.I18nTextNode('lblLoadingResources');this._progressBar=new PocketCode.Web.LoadingIndicator();this._startButton=document.createElement('button');this.startEnabled=false;this._addDomListener(this._startButton,'click',this._startClickHandler);this._addDomListener(this._startButton,'touchend',function(e){this._startButton.click();this._dom.blur()});this._createLayout();this.onResize.addEventListener(new SmartJs.Event.EventListener(this._onResizeHandler,this));this._onStartClicked=new SmartJs.Event.Event(this)}Object.defineProperties(PlayerStartScreen.prototype,{title:{get:function(){return this._titleTextNode.text},set:function(a){if(typeof a!=='string')throw new error('invalid argument: title: expected type = string');this._titleTextNode.text=a;var b=PocketCode.I18nProvider.getTextDirection(a);this._domHeader.dir=b},},previewImage:{set:function(a){this._previewImage.src=a},},progressText:{set:function(a){this._progressTextNode.text=a},},startEnabled:{set:function(a){if(typeof a!=='boolean')throw new error('invalid argument: startEnabled: expected type = boolean');this._startButton.disabled=!a;if(a){this._previewImage.className='';this.hideProgress()}else{this._previewImage.className='disabled';this.showProgress()}},},});Object.defineProperties(PlayerStartScreen.prototype,{onStartClicked:{get:function(){return this._onStartClicked},},});PlayerStartScreen.prototype.merge({_startClickHandler:function(e){this._onStartClicked.dispatchEvent()},_onResizeHandler:function(e){var a=Math.round(this._dom.offsetWidth*0.6/19.4);var b=Math.round(window.innerHeight*0.3/9.0);a=(a<b)?a:b;a=(a<10)?10:a;a=(a>12)?12:a;this._dom.style.fontSize=a+'px'},_createLayout:function(){this._dom.appendChild(this._previewImage);var a=document.createElement('div');this._domHeader.appendChild(a);a.appendChild(this._titleTextNode._dom);this._dom.appendChild(this._domHeader);this._progressLayout.className='pc-loadingIndicatorLayout';this._appendChild(this._progressLayout);var b=document.createElement('div');b.className='pc-loadingIndicator';this._progressLayout._dom.appendChild(b);var c=document.createElement('span');c.appendChild(this._progressTextNode._dom);b.appendChild(c);b.appendChild(this._progressBar._dom);this._startButton.innerHTML='<svg preserveAspectRatio="xMidYMid meet" viewBox="0,0,64,64">'+'<path d="M32,1C14.88,1,1,14.88,1,31.999C1,49.12,14.88,63,32,63s31-13.88,31-31.001C63,14.88,49.12,1,32,1z M32,56.979c-13.796,0-24.98-11.184-24.98-24.98c0-13.795,11.185-24.98,24.98-24.98s24.979,11.186,24.979,24.98 C56.979,45.796,45.796,56.979,32,56.979z" />'+'<polygon points="34.662,32 22.934,44.066 27.438,48.55 43.629,32 27.438,15.45 22.934,19.934" />'+'</svg>';this._dom.appendChild(this._startButton)},showProgress:function(){this._progressLayout.show()},hideProgress:function(){this._progressLayout.hide()},setProgress:function(a){this._progressBar.setProgress(a)},});return PlayerStartScreen})(),});

PocketCode.Ui.merge({PlayerToolbarSettings:{DESKTOP:{orientation:'v',position:'lo',hideable:false,animatedShowHide:false,hideOnStart:false,showOnGesture:false},MOBILE:{orientation:'h',position:'bi',hideable:true,animatedShowHide:true,hideOnStart:false,showOnGesture:false},MOBILE_IOS:{orientation:'v',position:'bi',hideable:true,animatedShowHide:true,hideOnStart:true,showOnGesture:true},},PlayerBtnCommand:{BACK:2,RESTART:3,START:4,PAUSE:5,SCREENSHOT:6,AXES:7,},PlayerToolbar:(function(){PlayerToolbar.extends(SmartJs.Ui.Control,false);function PlayerToolbar(a){if(!a||!a.orientation)throw new Error('invalid argument: constructor settings');this._settings=a;SmartJs.Ui.Control.call(this,'div',{className:'pc-playerMenu'+a.orientation.toUpperCase()});this._appendChild(new SmartJs.Ui.Control('div',{className:'pc-overlay'}));this._defaultHeight=550;this._defaultWidth=374;if(a.position=='bi'){this._overlay=new SmartJs.Ui.Control('div',{className:'pc-playerMenuOverlay'});this._overlayBtn=new SmartJs.Ui.ContainerControl({className:'pc-playerMenuPlayOverlay'});this._overlayBtn._dom.appendChild(document.createElement('div'));if(a.showOnGesture){var b=this._overlayBtn._dom;this._addDomListener(b,'touchstart',this._openMenuTabbedHandler);this._addDomListener(b,'mousedown',this._openMenuClickedHandler)}this._appendChild(this._overlay);this._appendChild(this._overlayBtn)}this._menuContainer=new SmartJs.Ui.ContainerControl({className:'pc-playerMenuContainer'});if(a.position=='lo'){this._menuContainer.addClassName('pc-playerMenuOutside')}this._appendChild(this._menuContainer);this._menuContainerAlign=new SmartJs.Ui.ContainerControl({className:'pc-alignedCell'});this._menuContainer.appendChild(this._menuContainerAlign);this._backButton=new PocketCode.Ui.PlayerSvgButton(PocketCode.Ui.SvgImageString.BACK,'btnBack');this._backButton.addClassName('pc-rtl');this._backButtonDisabled=false;this._backButton.onClick.addEventListener(new SmartJs.Event.EventListener(function(e){this.onButtonClicked.dispatchEvent({command:PocketCode.Ui.PlayerBtnCommand.BACK})},this));this._menuContainerAlign.appendChild(this._backButton);this._restartButton=new PocketCode.Ui.PlayerSvgButton(PocketCode.Ui.SvgImageString.RESTART,'btnRestart');this._restartButton.onClick.addEventListener(new SmartJs.Event.EventListener(function(e){this.onButtonClicked.dispatchEvent({command:PocketCode.Ui.PlayerBtnCommand.RESTART})},this));this._menuContainerAlign.appendChild(this._restartButton);this._startButton=new PocketCode.Ui.PlayerSvgButton(PocketCode.Ui.SvgImageString.PLAY,'btnStart',true);this._startButton.addClassName('pc-rtl');this._startButton.onClick.addEventListener(new SmartJs.Event.EventListener(function(e){this.onButtonClicked.dispatchEvent({command:PocketCode.Ui.PlayerBtnCommand.START})},this));this._menuContainerAlign.appendChild(this._startButton);this._pauseButton=new PocketCode.Ui.PlayerSvgButton(PocketCode.Ui.SvgImageString.PAUSE,'btnPause',true);this._pauseButton.onClick.addEventListener(new SmartJs.Event.EventListener(function(e){this.onButtonClicked.dispatchEvent({command:PocketCode.Ui.PlayerBtnCommand.PAUSE})},this));this._menuContainerAlign.appendChild(this._pauseButton);this._pauseButton.hide();this._screenshotButton=new PocketCode.Ui.PlayerSvgButton(PocketCode.Ui.SvgImageString.SCREENSHOT,'btnScreenshot');this._screenshotButtonDisabled=true;this._screenshotButton.onClick.addEventListener(new SmartJs.Event.EventListener(function(e){this.onButtonClicked.dispatchEvent({command:PocketCode.Ui.PlayerBtnCommand.SCREENSHOT})},this));this._menuContainerAlign.appendChild(this._screenshotButton);this._axesButton=new PocketCode.Ui.PlayerSvgButton(PocketCode.Ui.SvgImageString.AXES,'btnAxes');this._axesButtonDisabled=true;this._axesButton.onClick.addEventListener(new SmartJs.Event.EventListener(function(e){this.onButtonClicked.dispatchEvent({command:PocketCode.Ui.PlayerBtnCommand.AXES})},this));this._menuContainerAlign.appendChild(this._axesButton);this._executionState=PocketCode.ExecutionState.STOPPED;this._onResize.addEventListener(new SmartJs.Event.EventListener(this._resizeHandler,this));this._onResize.addEventListener(new SmartJs.Event.EventListener(function(){window.setTimeout(this._resizeHandler.bind(this,this),120)}.bind(this),this));this._onButtonClicked=new SmartJs.Event.Event(this)}Object.defineProperties(PlayerToolbar.prototype,{executionState:{set:function(a){switch(a){case PocketCode.ExecutionState.ERROR:this.disabled=true;break;case PocketCode.ExecutionState.RUNNING:this._startButton.hide();this._pauseButton.show();this._hideOverlay();break;case PocketCode.ExecutionState.PAUSED:this._pauseButton.hide();this._startButton.i18nKey='btnResume';this._startButton.show();this._showOverlay();break;default:this._pauseButton.hide();this._startButton.i18nKey='btnStart';this._startButton.show();this._showOverlay();break}this._executionState=a},get:function(){return this._executionState},},disabled:{set:function(a){if(typeof a!=='boolean')throw new Error('invalid argument: expected type: boolean');if(this._backButtonDisabled)this._backButton.disabled=true;else this._backButton.disabled=a;this._restartButton.disabled=a;this._startButton.disabled=a;this._pauseButton.disabled=a;if(this._screenshotButtonDisabled)this._screenshotButton.disabled=true;else this._screenshotButton.disabled=a;if(this._axesButtonDisabled)this._axesButton.disabled=true;else this._axesButton.disabled=a},},axesButtonChecked:{set:function(a){if(typeof a!=='boolean')throw new Error('invalid argument: expected type: boolean');this._axesButton.checked=a},},axesButtonDisabled:{set:function(a){if(typeof a!=='boolean')throw new Error('invalid argument: expected type: boolean');this._axesButtonDisabled=a;this._axesButton.disabled=a},},backButtonDisabled:{set:function(a){if(typeof a!=='boolean')throw new Error('invalid argument: expected type: boolean');this._backButtonDisabled=a;this._backButton.disabled=a},},screenshotButtonDisabled:{set:function(a){if(typeof a!=='boolean')throw new Error('invalid argument: expected type: boolean');this._screenshotButtonDisabled=a;this._screenshotButton.disabled=a},},});Object.defineProperties(PlayerToolbar.prototype,{onButtonClicked:{get:function(){return this._onButtonClicked},}});PlayerToolbar.prototype.merge({_openMenuTabbedHandler:function(e){if(this._executionState==PocketCode.ExecutionState.RUNNING)this.onButtonClicked.dispatchEvent({command:PocketCode.Ui.PlayerBtnCommand.BACK});e.preventDefault()},_openMenuClickedHandler:function(e){if(this._executionState==PocketCode.ExecutionState.RUNNING){if(e.button==0){this.onButtonClicked.dispatchEvent({command:PocketCode.Ui.PlayerBtnCommand.BACK});e.preventDefault()}}},_resizeHandler:function(a){if(this._settings.orientation=='h'){var b=10*this.width/this._defaultWidth;this.style.fontSize=Math.min(b,12)+'px'}else{var b=10*this.height/this._defaultHeight;this.style.fontSize=Math.min(b,13)+'px'}},_hideOverlay:function(){var a=this._settings;if(a.orientation=='h')this.style.height='0px';else this.style.width='0px';if(this._overlay)this._overlay.hide();if(this._overlayBtn){if(a.showOnGesture)this._overlayBtn.addClassName('pc-iOsClosed');else this._overlayBtn.hide()}if(a.position!=='lo')this._menuContainer.hide()},_showOverlay:function(){var a=this._settings;this.style.height='';this.style.width='';if(this._overlay)this._overlay.show();if(this._overlayBtn){this._overlayBtn.removeClassName('pc-iOsClosed');this._overlayBtn.show()}this._menuContainer.show()},dispose:function(){this._onResize.dispose();this._backButton.onClick.removeEventListener(new SmartJs.Event.EventListener(function(e){this.onButtonClicked.dispatchEvent({command:PocketCode.Ui.PlayerBtnCommand.BACK})},this));this._restartButton.onClick.removeEventListener(new SmartJs.Event.EventListener(function(e){this.onButtonClicked.dispatchEvent({command:PocketCode.Ui.PlayerBtnCommand.RESTART})},this));this._startButton.onClick.removeEventListener(new SmartJs.Event.EventListener(function(e){this.onButtonClicked.dispatchEvent({command:PocketCode.Ui.PlayerBtnCommand.START})},this));this._pauseButton.onClick.removeEventListener(new SmartJs.Event.EventListener(function(e){this.onButtonClicked.dispatchEvent({command:PocketCode.Ui.PlayerBtnCommand.PAUSE})},this));this._screenshotButton.onClick.removeEventListener(new SmartJs.Event.EventListener(function(e){this.onButtonClicked.dispatchEvent({command:PocketCode.Ui.PlayerBtnCommand.SCREENSHOT})},this));this._axesButton.onClick.removeEventListener(new SmartJs.Event.EventListener(function(e){this.onButtonClicked.dispatchEvent({command:PocketCode.Ui.PlayerBtnCommand.AXES})},this));SmartJs.Ui.Control.prototype.dispose.call(this)},});return PlayerToolbar})(),});

PocketCode.Ui.ScrollContainer=(function(){ScrollContainer.extends(SmartJs.Ui.ContainerControl,false);function ScrollContainer(a,b){SmartJs.Ui.ContainerControl.call(this,a);this._container=new SmartJs.Ui.ContainerControl(b);this._appendChild(this._container);if(!a)this._dom.style.overflow='hidden';this._iScroll=new IScroll(this._dom,{mouseWheel:true,interactiveScrollbars:true,scrollbars:'custom',bounce:true,shrinkScrollbars:'clip',preventDefault:true,});this.onResize.addEventListener(new SmartJs.Event.EventListener(this._resizeHandler,this));this._container.onResize.addEventListener(new SmartJs.Event.EventListener(this._resizeHandler,this))}ScrollContainer.prototype.merge({_resizeHandler:function(e){this._iScroll.refresh()},});return ScrollContainer})();
